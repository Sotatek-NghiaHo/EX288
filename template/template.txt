#Create app from template
oc new-app --template <project>/<template_name> -p <params>=<value>

#test a template file
oc new-app --dry-run -f <template_file.yml>

#show parameters
oc process --parameters <template_file.ml>

---

ğŸ§© 1ï¸âƒ£ Táº¡o á»©ng dá»¥ng tá»« má»™t template cÃ³ sáºµn trong project
```
oc new-app --template <project>/<template_name> -p <PARAM>=<VALUE>
```
ğŸ” Giáº£i thÃ­ch:

oc new-app: táº¡o má»›i má»™t á»©ng dá»¥ng trong OpenShift.

--template: chá»‰ Ä‘á»‹nh báº¡n muá»‘n táº¡o app tá»« má»™t template cÃ³ sáºµn.

<project>/<template_name>: tÃªn cá»§a template, kÃ¨m theo project chá»©a template Ä‘Ã³.

VÃ­ dá»¥: myproject/nodejs-template

-p <PARAM>=<VALUE>: truyá»n giÃ¡ trá»‹ cho cÃ¡c parameters (tham sá»‘) mÃ  template yÃªu cáº§u.

CÃ³ thá»ƒ truyá»n nhiá»u tham sá»‘, vÃ­ dá»¥:

-p NAME=myapp -p IMAGE_STREAM=python:3.9

âœ… VÃ­ dá»¥ cá»¥ thá»ƒ:
```
oc new-app --template myproject/nodejs-template -p NAME=myapp -p SOURCE_REPOSITORY_URL=https://github.com/myrepo/app.git
```

â†’ Lá»‡nh nÃ y táº¡o má»™t á»©ng dá»¥ng Node.js tá»« template nodejs-template trong project myproject.

ğŸ§ª 2ï¸âƒ£ Kiá»ƒm tra template file (dry-run, khÃ´ng thá»±c sá»± táº¡o)
```
oc new-app --dry-run -f <template_file.yml>
```
ğŸ” Giáº£i thÃ­ch:

--dry-run: chá»‰ cháº¡y thá»­, khÃ´ng thá»±c sá»± táº¡o resource trong cluster.

-f <template_file.yml>: chá»‰ Ä‘á»‹nh file YAML hoáº·c JSON chá»©a Ä‘á»‹nh nghÄ©a template.

ğŸ§  Má»¥c Ä‘Ã­ch:
â†’ DÃ¹ng Ä‘á»ƒ kiá»ƒm tra xem template cÃ³ há»£p lá»‡ khÃ´ng, cÃ¡c resource sáº½ Ä‘Æ°á»£c táº¡o ra nhÆ° tháº¿ nÃ o trÆ°á»›c khi triá»ƒn khai tháº­t.

âœ… VÃ­ dá»¥:
```
oc new-app --dry-run -f mytemplate.yml
```

â†’ In ra danh sÃ¡ch cÃ¡c Ä‘á»‘i tÆ°á»£ng (Deployment, Service, Route, â€¦) mÃ  template sáº½ táº¡o.

ğŸ“œ 3ï¸âƒ£ Xem cÃ¡c tham sá»‘ (parameters) trong má»™t template
```
oc process --parameters -f <template_file.yml>
```

Hoáº·c náº¿u template Ä‘Ã£ tá»“n táº¡i trong OpenShift project:
```
oc process --parameters <project>/<template_name>
```
ğŸ” Giáº£i thÃ­ch:

oc process: xá»­ lÃ½ má»™t template, thay cÃ¡c parameters vÃ o file.

--parameters: chá»‰ hiá»ƒn thá»‹ danh sÃ¡ch cÃ¡c parameter (tÃªn, mÃ´ táº£, giÃ¡ trá»‹ máº·c Ä‘á»‹nh, báº¯t buá»™c hay khÃ´ng).

-f: chá»‰ Ä‘á»‹nh file template trÃªn mÃ¡y cá»¥c bá»™.

âœ… VÃ­ dá»¥:
```
oc process --parameters -f nodejs-template.yml
```

â†’ Sáº½ hiá»‡n danh sÃ¡ch nhÆ° sau:
```
NAME                     DESCRIPTION                      VALUE
NAME                     The name of the application.     myapp
SOURCE_REPOSITORY_URL    The source code repository.      https://github.com/...
```
ğŸ’¡ Tá»•ng há»£p nhanh:

| Má»¥c Ä‘Ã­ch                 | Lá»‡nh                                                     | Giáº£i thÃ­ch                            |
| ------------------------ | -------------------------------------------------------- | ------------------------------------- |
| Táº¡o app tá»« template      | `oc new-app --template <project>/<template_name> -p ...` | Táº¡o app má»›i tá»« template cÃ³ sáºµn        |
| Kiá»ƒm tra template file   | `oc new-app --dry-run -f <template_file.yml>`            | Xem trÆ°á»›c resource sáº½ Ä‘Æ°á»£c táº¡o ra     |
| Xem danh sÃ¡ch parameters | `oc process --parameters -f <template_file.yml>`         | Liá»‡t kÃª cÃ¡c tham sá»‘ cÃ³ thá»ƒ truyá»n vÃ o |

---

CÃ¢u há»i ráº¥t hay ğŸ‘

Trong lá»‡nh oc new-app hoáº·c oc process, báº¡n cÃ³ thá»ƒ tháº¥y cÃ³ lÃºc dÃ¹ng:
```
-p <PARAM>=<VALUE>
```

vÃ  Ä‘Ã´i khi tháº¥y cÃ³ ngÆ°á»i viáº¿t:
```
-e <PARAM>=<VALUE>
```
ğŸ§© Sá»± khÃ¡c biá»‡t giá»¯a -p vÃ  -e

| Cá» (flag) | DÃ¹ng cho                  | Ã nghÄ©a                                                                             | Khi nÃ o dÃ¹ng                                                                         |
| --------- | ------------------------- | ----------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------ |
| `-p`      | **Parameters**            | Truyá»n **giÃ¡ trá»‹ cho cÃ¡c tham sá»‘** (parameters) trong template hoáº·c file `.yaml`    | Khi báº¡n muá»‘n gÃ¡n giÃ¡ trá»‹ cho cÃ¡c `parameters` cá»§a template OpenShift                 |
| `-e`      | **Environment variables** | Truyá»n **biáº¿n mÃ´i trÆ°á»ng (environment variables)** vÃ o **container** trong á»©ng dá»¥ng | Khi báº¡n muá»‘n Ä‘áº·t giÃ¡ trá»‹ mÃ´i trÆ°á»ng trong deployment (VD: `ENV=prod`, `DEBUG=false`) |

ğŸ’¡ VÃ­ dá»¥ minh há»a
1ï¸âƒ£ DÃ¹ng -p (parameters)

Template mytemplate.yml cÃ³ pháº§n:
```
parameters:
  - name: APP_NAME
    description: Application name
    value: myapp
```

Báº¡n cháº¡y:
```
oc new-app --template=myproject/mytemplate -p APP_NAME=testapp
```

â†’ APP_NAME lÃ  parameter cá»§a template, Ä‘Æ°á»£c thay vÃ o cÃ¡c chá»— tÆ°Æ¡ng á»©ng trong file YAML trÆ°á»›c khi táº¡o resource.

2ï¸âƒ£ DÃ¹ng -e (environment variables)

Giáº£ sá»­ báº¡n táº¡o app tá»« image:

oc new-app python:3.9~https://github.com/example/myapp.git -e DEBUG=true -e API_URL=https://api.example.com


â†’ á» Ä‘Ã¢y DEBUG vÃ  API_URL lÃ  environment variables, Ä‘Æ°á»£c Ä‘Æ°a vÃ o container cá»§a á»©ng dá»¥ng (giá»‘ng nhÆ° ENV trong Dockerfile).

ğŸ§  TÃ³m táº¯t dá»… nhá»›:

| Má»¥c Ä‘Ã­ch                                 | Flag | VÃ­ dá»¥           |
| ---------------------------------------- | ---- | --------------- |
| Truyá»n **tham sá»‘** cho template          | `-p` | `-p NAME=myapp` |
| Truyá»n **biáº¿n mÃ´i trÆ°á»ng** cho container | `-e` | `-e DEBUG=true` |

Náº¿u báº¡n Ä‘ang dÃ¹ng template YAML cá»§a OpenShift, háº§u háº¿t thá»i gian báº¡n nÃªn dÃ¹ng -p.
Náº¿u báº¡n táº¡o app trá»±c tiáº¿p tá»« image hoáº·c source code, thÃ¬ -e lÃ  há»£p lÃ½ hÆ¡n.


âš™ï¸ Sá»± khÃ¡c biá»‡t giá»¯a oc new-app vÃ  oc process
ğŸ”¹ 1ï¸âƒ£ oc process: chá»‰ xá»­ lÃ½ template, khÃ´ng táº¡o gÃ¬ trong cluster
```
oc process -f template.yml -p PARAM=value
```
ğŸ‘‰ Giáº£i thÃ­ch:

Má»¥c Ä‘Ã­ch: â€œRenderâ€ (xá»­ lÃ½) file template: thay cÃ¡c giÃ¡ trá»‹ parameters vÃ o cÃ¡c chá»— tÆ°Æ¡ng á»©ng trong template.

Káº¿t quáº£: In ra YAML hoÃ n chá»‰nh cá»§a cÃ¡c resource (Deployment, Service, Route, â€¦), nhÆ°ng chÆ°a táº¡o trong cluster.

ThÆ°á»ng dÃ¹ng khi báº¡n muá»‘n xem hoáº·c chá»‰nh trÆ°á»›c khi apply.

âœ… VÃ­ dá»¥:
```
oc process -f nodejs-template.yml -p NAME=myapp > output.yml
```

â†’ File output.yml chá»©a toÃ n bá»™ resource Ä‘Ã£ Ä‘Æ°á»£c thay tháº¿ giÃ¡ trá»‹, sáºµn sÃ ng Ä‘á»ƒ apply:

oc apply -f output.yml

ğŸ”¹ 2ï¸âƒ£ oc new-app: vá»«a xá»­ lÃ½ vá»«a táº¡o resource tháº­t
```
oc new-app --template=myproject/nodejs-template -p NAME=myapp
```
ğŸ‘‰ Giáº£i thÃ­ch:

oc new-app gá»i ngáº§m oc process bÃªn trong, rá»“i gá»­i káº¿t quáº£ lÃªn API server Ä‘á»ƒ táº¡o cÃ¡c resource tháº­t (Deployment, Service, Route...).

NÃ³ lÃ  bÆ°á»›c tá»± Ä‘á»™ng hÃ³a cao hÆ¡n so vá»›i oc process.

âœ… VÃ­ dá»¥:
oc new-app --template=myproject/nodejs-template -p NAME=myapp


â†’ OpenShift sáº½:

Láº¥y template nodejs-template

Thay cÃ¡c parameters vÃ o

Táº¡o resource tháº­t trong cluster (Deployment, Service, Route, v.v.)

ğŸ’¡ So sÃ¡nh nhanh:

| Má»¥c Ä‘Ã­ch                            | Lá»‡nh         | Káº¿t quáº£                    | Ghi chÃº                                    |
| ----------------------------------- | ------------ | -------------------------- | ------------------------------------------ |
| Xá»­ lÃ½ template Ä‘á»ƒ xem trÆ°á»›c         | `oc process` | Xuáº¥t YAML                  | KhÃ´ng táº¡o resource                         |
| Táº¡o app tháº­t tá»« template hoáº·c image | `oc new-app` | Táº¡o resource trong cluster | CÃ³ thá»ƒ dÃ¹ng template, image, hoáº·c git repo |

âš¡ Káº¿t há»£p cáº£ hai

Náº¿u báº¡n muá»‘n kiá»ƒm tra trÆ°á»›c khi táº¡o, cÃ³ thá»ƒ káº¿t há»£p:
```
oc process -f template.yml -p NAME=myapp | oc apply -f -
```

Hoáº·c dÃ¹ng --dry-run trong oc new-app:

oc new-app --template=myproject/nodejs-template -p NAME=myapp --dry-run


TÃ³m gá»n:

ğŸ§  oc process = â€œChuáº©n bá»‹â€ YAML
ğŸš€ oc new-app = â€œTáº¡o app tháº­tâ€ (dá»±a trÃªn YAML Ä‘Ã³)





